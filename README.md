# auto_doc_search
Библиотека для автоматического внутреннего поиска и ответов на вопросы по информации  внутри документов пользователя


Пример конфигурации для запуска пайплайна:

```python
##В cd ставить папку в которой хранится папка с модулем AutoRAG
  
from AutoRAG.expirement_runner import ExperimentManager

if __name__ == "__main__":
    config = {
        # Путь к архиву с документами
        "word_file_path": "test_product.zip",
        
        # Настройки эмбеддера (Поставлены эмбеддинги СберДевайсов)
        "embedder_name": "devices",

        # Для подгрузки кастомных моделей sentence_transformers указывается путь к модели.
        # Если используюся эмбеддинги девайсов то ставить None
        "custom_embedder_model_name": None, 
        
        # Сколько чанков выдавать из AutoDOC системы
        "top_n_chunks": 5,
        "validation_pro_model": True,  # Сравнение с GigaChat Pro при вызове manager.run_pipeline()
        
        # Выбор моделей для ответа на вопрос, генерацию вопроса, валидацию
        "question_answering_model_name": "GigaChat",
        "validation_model_name": "GigaChat-Max",
        "question_generation_model_name": "GigaChat",
        
        #Cколько тестовых вопросов нужно генерировать на каждый индекс в БД
        "query_per_index": None,
        
        ## сертификаты для доступа к гигачату и эмбеддингам девайсов
        "token": "token",
    }
    ## Инициализация конфига для всего пайплайна
    manager = ExperimentManager(config)

    ##сборка всего пайплайна 
    manager.run_pipeline()
```
## Доступные параметры конфига 

1. **`word_file_path`**  
   Путь к zip архиву с документами docx из которых создается поисковый индекс FAISS  (доки должны быть на английском)

2. **`embedder_name`**  
   devices - Вызывается эмбеддер SberDevices. В ключах нужно указать путь к сертификатам `devices_key_path` и 
   `devices_cert_path` для вызова API SberDevices

   GigaChatInstruct - эмбеддер гигачата, вызывается как инстанс SentenceTransformers и искользует локальную GPU память 

   custom -  SentenceTransformers эмбеддер, вписывается путь к папке с эмбеддером. 
   В ключах словаря нужно указать custom_embedder_name и если не используется сделать None

   
4. **`custom_embedder_model_name`**
     название  модели из huggingface hub которую надо выгрузить или путь к натренированному эмбеддеру
    `None` если не планируется использовать кастомный эмбеддер

6. **`top_n_chunks`**  
   Количество текстовых фрагментов (чанков), которые система RAG извлекает для    обработки и поиска ответов.

7. **`query_excel_file`**  
   Путь к Excel-файлу, содержащему список вопросов, на которые требуется получить ответы.

8. **`query_column_excel_file`**  
   Название колонки в Excel-файле, где находятся вопросы.
   
9. **`query`**  
   Список вопросов для обработки. Если указано значение `None`, вопросы извлекаются из других источников (например, Excel-файла).

10. **`query_per_index`**  
    Количество вопросов, которые нужно сгенерировать. Если значение `None`, ограничение не задается и вопросы генерируются по всем чанкам в индеках

11. **`devices_cert_path`**  
    Путь к файлу сертификата девайсов
    **`devices_key_path`**  
    Путь к файлу ключа для работы с защищенными устройствами или соединениями.


12. **`question_answering_model_name`**  
    Название модели LLM, используемой для генерации ответов на вопросы.  
    Пример: `GigaChat`.

13. **`query_generation_model_name`**  
    Название модели LLM, используемой для генерации новых вопросов.  
    Пример: `GigaChat-Max`.

14. **`auto_validation_model_name`** 
    Название модели LLM, применяемой для автоматической валидации вопросов и ответов.  
    Пример: `GigaChat-Max`.

15. **`expiriment_path`**    
    Имя папки эксперимента которая будет создаваться в текущей директории. 
    Если папка есть, то в нее выгружаются все результаты работы пайплайна
    Пример:  `Expiriment_chunk_path`

16. **`system_user_prompt`** str
    Системный промпт который можно задать вместо дефолтного для ответов на вопросы 

17. **`query_list`** List[str]
    Список пользовательских вопросов на которые сгенерируются ответы во время сборки пайплайна

18. **`experiment_path`** str
    Имя папки эксперимента которая будет создаваться в текущей директории. 
    Если папка есть, то в нее выгружаются все результаты работы пайплайна
    Пример:  `Expiriment_chunk_path`

19. **`experiment_dir`** str
    Адрес пути в котором будет создаваться директория для сохранения всех результатов пайплайна
    Пример : С:/user/path/test_directory
